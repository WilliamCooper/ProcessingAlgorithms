# Introduction  

## Background Information {#background-information}

This technical report defines the variables used in data sets that are collected by the research aircraft operated by the Research Aviation Facility (RAF) of the National Center for Atmospheric Research. Where appropriate, it also documents the equations that are used by the processing software (currently “nimbus”) to calculate the derived measurements that result from the use of one or more other basic measurements (e.g., potential temperature). Since 1993, data from research flights have been archived in NetCDF format (cf. [this description](https://www.unidata.ucar.edu/software/netcdf/docs/)), and the NetCDF header for recent projects includes detailed information on the measurements present in the file, how they depend on other measurements, units, etc. The conventions that the RAF uses for NetCDF data files are documented at [this URL](https://www.eol.ucar.edu/raf/Software/netCDF.html).    

This document should change as changes in processing algorithms are implemented, but the intent is also to provide a history of algorithms that have been used so there is an effort to document how historical data files were processed along with the descriptions of current algorithms. Unlike some technical reports, this document is likely to change over time and should provide a history extending back to [RAF Bulletin 9](https://opensky.ucar.edu/islandora/object/archives%3A8729), which documented the processing algorithms as they existed before about 2003.  

Currently, the data acquisition process on the research aircraft of the Research Aviation Facility, Earth Observing Laboratory, proceeds as follows:  

1. Analog or digital outputs from instruments are sampled at regular intervals, typically 50 Hz when possible. Analog outputs are converted to digital values via analog-to-digital converters. The investigators' handbooks for each aircraft describe this process in detail, including resolution of the sampling and handling of the results. Often, signals from user-supplied instruments are also included in the measured values that are handled by the data system.  
2. The digital outputs are then recorded by the data system on the aircraft. Currently, this is a task of the ["NIDAS"](https://www.eol.ucar.edu/data/software/nidas) system described below. That system also controls the sampling, time stamps, and other aspects of data recording.  
3. In flight, the data are processed by the *“nimbus”* data processing program, which makes them available for display via [aeros](http://www.eol.ucar.edu/raf/Software/aeros_dnld.html) for real-time monitoring of measurements.  
4. Following the flight, *nimbus* again processes the data. At this stage, measurements can be re-sampled with averaging and/or interpolation to produce various data rates, usually 1 Hz or 25 Hz, and known lags in measurements can be introduced to adjust measurements to a common time basis. As part of this processing, *nimbus* applies calibration coefficients where appropriate to convert recorded values (e.g., voltage) to engineering units (e.g., $^\circ$C). Determining or checking these calibration coefficients is part of the pre-flight and post-flight procedures for each project.  
5. The output from *nimbus* is the data file that is the permanent archive from the experiment, often after merging additional data sets from users that are not recorded in the original data file produced by *NIDAS.* These files, in NetCDF format, have headers that contain metadata on each measurement (such as the calibration coefficients, the instrument that produced the measurement, etc.). Many of the variables in these files are discussed in this technical note, but the files may also include additional project-specific measurements for which the NetCDF header and the project reports will be the primary documentation.  

For assistance accessing data from RAF-supported projects, contact the RAF data management group via <a href="mailto:raf-dm%40eol.ucar.edu">this email address</a>.  

```{r include = TRUE, echo = FALSE}
## construct data.frame for the following table:
DSYS <- data.frame("Data System" = c('ADS I', 'ADS II', 'ADS III (NIDAS)^[ADS III is the name given to the full data system, which includes these components: NIDAS (for data acquisition and recording); NIMBUS (for data processing, both in flight and after the flight); AEROS (for data display in flight); and the Mission Coordinator Station and satellite communications system (for transmission of data to and from the aircraft, display of such data for mission decisions, and support for written “chat” communications among project participants both on the aircraft and on the ground).]'))
DSYS$start <- c('1984', '1992', '2005')
DSYS$end <- c('1992', '2007', ' ')
DSYS$aircraft <- c('King Air 200T, Sabreliner (1987), Electra (1991)', 'C-130', 'GV, C-130 after 2007')
```
The data system has changed several times over the history of the RAF. For a discussion of the history of the data systems, see [this note](www/ADSHistory.pdf) written by Richard Friesen. The versions of data systems that produced most of the data still available were, approximately, as given in the following table: 
```{r include = TRUE}
knitr::kable(DSYS, align=c('cccl')) %>% kable_styling(bootstrap_options = 'bordered') %>%
  scroll_box(width='80%')
```
  
Before 1993, data were processed by a different program, “GENPRO,” and a different output format (also named GENPRO) was used for archived datasets. Appendix E in [RAF Bulletin 9](https://opensky.ucar.edu/islandora/object/archives%3A8729), the previous description of RAF data products that is now superseded by this technical note, describes that format. Some variable names in this new document, esp. in section \@ref(obsolete-variables), refer to obsolete variable names, some used with GENPRO and others referring to instruments that are now retired. These names are included here so that this technical report can be a partial reference for older archived data as well as for current data files.  

## Alphabetical List of Variables

At the end of this document, there is a list of all the variable names that appear in standard data files along with links to the primary discussion of those variables; see [Appendix B](./appendix-b-variable-names.html#variable-names). In some cases redundant measurements are present, often for key measurements like pressure or temperature. When these are used in subsequent calculation of derived variables like potential temperature, some choice is usually made regarding which measurement is considered most reliable for a particular project or flight, and a single derived variable is calculated on the basis of the chosen input variable(s). To record which measurements were so designated, a reference measurement chosen from a group of redundant measurements usually has a variable name ending with the letter(s) X or XC,^[Some that do not follow this convention are ATTACK and SSLIP; see the individual descriptions that follow.] and the "Dependencies" attribute for that variable specifies which measurement was chosen^[Hint: To see the variables in a particular netCDF data file named "file.nc", use the unix command “ncdump -h file.nc”.].

## Constants and Symbols {#constants-and-symbols}

The following table contains values used for some constants in this document. For reference, the symbols used here and elsewhere in this document are defined in the List of Symbols near the end of the document (cf.\ [Appendix A](./appendix-a-list-of-symbols.html#list-of-symbols)). Where references are to the “NIST Chemistry WebBook”, the associated URL is [https://webbook.nist.gov](https://webbook.nist.gov). References to the CODATA Internationally recommended values of the Fundamental Physical Constants are available at [https://physics.nist.gov/cuu/Constants/index.html](https://physics.nist.gov/cuu/Constants/index.html). The optimization involved in adjustment of these coefficients is documented in [E. Tiesinga, P. J. Mohr, D. B. Newell, and B. N. Taylor, J. Phys. Chem. Ref. Data 50, 033105 (2021)](https://physics.nist.gov/cuu/pdf/JPCRD2018CODATA.pdf). 
In the present technical note, references to these symbols will often have these symbols or definitions marked by the symbol $^\dagger$ to indicate that the values used are the standard ones in the following table.^[This table does not account for the 2017 revision of the basic SI units. The changes are not significant, but eventually processing should account for them. New values: Avogadro constant: $N_A=6.02214076\times 10^{23}$ particles per mole; Boltzmann constant: $k=1.380649 × 10^{-23}$ joules/kelvin; $R_0=8.314463\times 10^{3}$ J kmol$^{-1}$K$^{-1}$; Stefan-Boltzmann constant $5.670374419...  x 10^{-8} W m^{-2} K^{-4}$. These definitions are exact. The reference values for basic units including the kilogram, meter, second and kelvin have not changed. See https://www.nist.gov/si-redefinition/definitions-si-base-units for the 2017 values of the SI units.]  

<p><span id="punch1.1" label="punch1.1">`r ifelse(PToDo,"[ToDo1.1]","")`</span><span id="punch1.2" label="punch1.2">`r ifelse(PToDo,"[ToDo1.2]","")`</span></p>

```{r child='./constants.Rmd'}
```

***  
### Footnotes: {.unnumbered}
